# ========================================
# FICHIER DE CONFIGURATION - TEMPLATE
# ========================================
# Ce fichier est un modèle documenté de toutes les variables d'environnement nécessaires.
# NE JAMAIS committer de vraies valeurs sensibles dans ce fichier.
# Copier ce fichier vers .env.development ou .env.production et remplir les vraies valeurs.

# ========================================
# ENVIRONNEMENT
# ========================================
# Environnement d'exécution (development | production)
NODE_ENV=development

# ========================================
# SERVEUR
# ========================================
# Port du serveur (5000 par défaut pour Replit)
PORT=5000

# Hôte du serveur (0.0.0.0 pour bind sur toutes les interfaces)
HOST=0.0.0.0

# URL du frontend (pour CORS et liens dans emails)
FRONTEND_URL=http://localhost:5173

# ========================================
# BASE DE DONNÉES
# ========================================
# URL de connexion PostgreSQL (Neon ou autre)
# Format: postgresql://user:password@host:port/database?sslmode=require
DATABASE_URL=postgresql://user:password@host:5432/database

# ========================================
# SÉCURITÉ & AUTHENTIFICATION
# ========================================
# Clé secrète pour JWT (CRITICAL: générer avec "openssl rand -base64 32")
JWT_SECRET=REMPLACER_PAR_UNE_CLE_FORTE_ALEATOIRE_32_CARACTERES_MINIMUM

# Durée de validité des tokens JWT
JWT_EXPIRES_IN=24h

# Clé secrète pour les cookies de session (CRITICAL: générer avec "openssl rand -base64 32")
COOKIE_SECRET=REMPLACER_PAR_UNE_AUTRE_CLE_FORTE_ALEATOIRE_32_CARACTERES_MINIMUM

# Durée de validité des cookies (en millisecondes)
COOKIE_MAX_AGE=86400000

# Nombre de rounds bcrypt pour hachage des mots de passe
BCRYPT_ROUNDS=12

# ========================================
# CORS & SÉCURITÉ
# ========================================
# Domaines autorisés pour CORS (séparés par virgule)
# En développement: http://localhost:5000,http://localhost:5173
# En production: https://votre-domaine.com
CORS_ORIGIN=http://localhost:5000,http://localhost:5173

# ========================================
# EMAIL / SMTP
# ========================================
# Mode interception des emails (true = logs uniquement, false = envoi réel via SMTP)
EMAIL_INTERCEPT=true

# Configuration SMTP (Brevo, SendGrid, etc.)
# Requis uniquement si EMAIL_INTERCEPT=false
EMAIL_HOST=smtp-relay.brevo.com
EMAIL_PORT=587
EMAIL_USER=votre-email@example.com
EMAIL_PASS=REMPLACER_PAR_VOTRE_CLE_API_BREVO

# Expéditeur par défaut
EMAIL_FROM_ADDRESS=noreply@passerelle-cap.fr
EMAIL_FROM_NAME=Passerelle CAP

# ========================================
# UPLOAD DE FICHIERS
# ========================================
# Répertoire de stockage des fichiers uploadés
UPLOADS_DIR=uploads

# Taille maximale des fichiers (en bytes, 10MB par défaut)
UPLOAD_MAX_SIZE=10485760

# Types MIME autorisés (séparés par virgule)
UPLOAD_ALLOWED_TYPES=application/pdf,image/jpeg,image/png

# ========================================
# SFTP - Synchronisation o2switch (Production uniquement)
# ========================================
# Mot de passe SFTP pour transférer les fichiers vers o2switch
# UNIQUEMENT utilisé en production (NODE_ENV=production)
# En développement, les fichiers restent locaux
SFTP_PASSWORD=REMPLACER_PAR_LE_MOT_DE_PASSE_SFTP_O2SWITCH

# Configuration SFTP (valeurs fixes pour o2switch)
# SFTP_HOST=millet.o2switch.net
# SFTP_PORT=22
# SFTP_USER=kalo4499
# SFTP_REMOTE_PATH_NAVETTES=/home/kalo4499/uploads/navettes/
# SFTP_REMOTE_PATH_BILANS=/home/kalo4499/uploads/bilans/

# ========================================
# RATE LIMITING
# ========================================
# Fenêtre de temps pour le rate limiting (en millisecondes, 15min par défaut)
RATE_LIMIT_WINDOW=900000

# Nombre maximum de requêtes par fenêtre
RATE_LIMIT_MAX=100

# ========================================
# COMPTES DE DÉMONSTRATION
# ========================================
# Autoriser les actions critiques sur les comptes démo (true en dev, false en prod)
# En production, les comptes @demo.passerelle.cap sont en lecture seule
ALLOW_DEMO_ACTIONS=true

# ========================================
# FRONTEND (Variables VITE_*)
# ========================================
# Ces variables sont injectées dans le bundle frontend par Vite
# IMPORTANT: Seules les variables préfixées par VITE_ sont accessibles côté client

# Activer l'affichage des comptes de démonstration dans l'UI
VITE_ENABLE_DEMO_ACCOUNTS=true

# URL de l'API backend (pour les appels depuis le frontend)
VITE_API_URL=http://localhost:5000

# ========================================
# LOGS & DEBUG
# ========================================
# Niveau de log (error | warn | info | debug)
LOG_LEVEL=info

# Mode debug (affiche plus de détails dans les logs)
DEBUG=false

# ========================================
# OPTIONNEL - Services Externes
# ========================================
# Configuration Sentry pour monitoring des erreurs (optionnel)
# SENTRY_DSN=https://your-sentry-dsn.ingest.sentry.io/project-id

# Configuration Redis pour cache (optionnel, scaling futur)
# REDIS_URL=redis://localhost:6379

# ========================================
# VARIABLES REPLIT (automatiques)
# ========================================
# Ces variables sont automatiquement définies par Replit, ne pas les modifier
# REPL_ID, REPL_OWNER, REPLIT_DEPLOYMENT, etc.
